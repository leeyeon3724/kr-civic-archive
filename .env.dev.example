# Compose runtime (development)
APP_ENV=development
DEBUG=0
PORT=8000
UVICORN_WORKERS=1
API_PUBLISH_BIND=0.0.0.0
API_PUBLISH_PORT=8000

# Database
POSTGRES_USER=app_user
POSTGRES_PASSWORD=change_me
POSTGRES_DB=civic_archive
DB_PUBLISH_BIND=127.0.0.1
DB_PUBLISH_PORT=5432
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT_SECONDS=30
DB_POOL_RECYCLE_SECONDS=3600
DB_CONNECT_TIMEOUT_SECONDS=3
DB_STATEMENT_TIMEOUT_MS=5000

# Redis
REDIS_URL=redis://redis:6379/0
REDIS_APPENDONLY=no
REDIS_PUBLISH_BIND=127.0.0.1
REDIS_PUBLISH_PORT=6379

# Security
SECURITY_STRICT_MODE=0
REQUIRE_API_KEY=0
API_KEY=
REQUIRE_JWT=0
JWT_SECRET=
JWT_ALGORITHM=HS256
JWT_LEEWAY_SECONDS=0
JWT_AUDIENCE=
JWT_ISSUER=
JWT_SCOPE_READ=archive:read
JWT_SCOPE_WRITE=archive:write
JWT_SCOPE_DELETE=archive:delete
JWT_ADMIN_ROLE=admin

# CORS/Host
ALLOWED_HOSTS=*
CORS_ALLOW_ORIGINS=*
CORS_ALLOW_METHODS=GET,POST,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*
TRUSTED_PROXY_CIDRS=

# Rate limit / cache
READ_CACHE_TTL_SECONDS=0
RATE_LIMIT_PER_MINUTE=0
RATE_LIMIT_BACKEND=memory
RATE_LIMIT_REDIS_PREFIX=civic_archive:rate_limit
RATE_LIMIT_REDIS_WINDOW_SECONDS=65
RATE_LIMIT_REDIS_FAILURE_COOLDOWN_SECONDS=5
RATE_LIMIT_FAIL_OPEN=1

# Request guardrails
INGEST_MAX_BATCH_ITEMS=200
MAX_REQUEST_BODY_BYTES=1048576

# Logging
LOG_LEVEL=INFO
LOG_JSON=1
